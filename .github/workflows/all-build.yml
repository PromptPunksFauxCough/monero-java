name: monero-java (Build All)

on:
  workflow_dispatch:
    inputs:
      ENABLE_LINUX:
        description: "Enable Linux builds"
        required: false
        default: "true"
      ENABLE_MACOS:
        description: "Enable macOS builds"
        required: false
        default: "false"
      ENABLE_WINDOWS:
        description: "Enable Windows builds"
        required: false
        default: "false"
  push:
    branches:
      - static

jobs:
# üêß Linux Builds

  build-linux-amd64:
    if: ${{ github.event_name == 'push' || (github.event_name == 'workflow_dispatch' && inputs.ENABLE_LINUX == 'true') }}
    uses: ./.github/workflows/core-build.yml
    with:
      runner: ubuntu-22.04
      variant: linux_amd64

  build-linux-arm64:
    if: ${{ github.event_name == 'push' || (github.event_name == 'workflow_dispatch' && inputs.ENABLE_LINUX == 'true') }}
    uses: ./.github/workflows/core-build.yml
    with:
      runner: ubuntu-22.04-arm
      variant: linux_arm64

# üçé macOS Builds

  build-macos-amd64:
    if: ${{ github.event_name == 'push' || (github.event_name == 'workflow_dispatch' && inputs.ENABLE_MACOS == 'true') }}
    uses: ./.github/workflows/core-build.yml
    with:
      runner: macos-13
      variant: macos_amd64

  build-macos-arm64:
    if: ${{ github.event_name == 'push' || (github.event_name == 'workflow_dispatch' && inputs.ENABLE_MACOS == 'true') }}
    uses: ./.github/workflows/core-build.yml
    with:
      runner: macos-14
      variant: macos_arm64

# ü™ü Windows Builds

  build-windows-amd64:
    if: ${{ github.event_name == 'push' || (github.event_name == 'workflow_dispatch' && inputs.ENABLE_WINDOWS == 'true') }}
    uses: ./.github/workflows/core-build.yml
    with:
      runner: windows-2022
      variant: windows_amd64

  build-windows-arm64:
    if: ${{ github.event_name == 'push' || (github.event_name == 'workflow_dispatch' && inputs.ENABLE_WINDOWS == 'true') }}
    uses: ./.github/workflows/core-build.yml
    with:
      runner: windows-11-arm
      variant: windows_arm64
